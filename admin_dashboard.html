<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard | CMCS VLS</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-white min-h-screen flex flex-col font-sans">

    <nav class="bg-[#0070c0] text-white p-0 flex justify-between items-center h-16 shadow-md">
        <div class="flex items-center px-6 gap-2">
            <span class="font-bold text-lg">[Logo]</span>
            <h1 class="font-bold text-lg tracking-tight">CMCS Virtual Learning System</h1>
        </div>
        
        <div class="flex items-center h-full">
            <div class="flex gap-4 px-6 items-center">
                <span id="adminName" class="font-bold text-sm">Lastname, Firstname</span>
                <span id="adminEmail" class="font-bold text-sm">Email@gmail.com</span>
            </div>
            <button onclick="logout()" class="bg-[#cc0000] hover:bg-red-700 h-full px-10 text-white font-bold text-sm transition-colors">
                Logout
            </button>
        </div>
    </nav>

    <main class="flex-1 flex items-center justify-center p-6">
        <div class="grid grid-cols-2 gap-4 w-full max-w-4xl aspect-[4/3] md:aspect-[16/9]">
            
            <a href="admin_approval.html" class="bg-[#00b0f0] hover:opacity-90 flex items-center justify-center text-white font-bold text-2xl uppercase transition-opacity shadow-sm">
                Approvals
            </a>

            <a href="admin_setup.html" class="bg-[#1cc024] hover:opacity-90 flex items-center justify-center text-white font-bold text-2xl uppercase transition-opacity shadow-sm">
                Academic Setup
            </a>

            <a href="admin_class.html" class="bg-[#ffc000] hover:opacity-90 flex items-center justify-center text-white font-bold text-2xl uppercase transition-opacity shadow-sm">
                Class Assignment
            </a>

            <a href="admin_records.html" class="bg-[#7030a0] hover:opacity-90 flex items-center justify-center text-white font-bold text-2xl uppercase transition-opacity shadow-sm">
                Master Record
            </a>

        </div>
    </main>

    <footer class="bg-[#0070c0] text-white p-6">
        <div class="max-w-7xl mx-auto">
            <p class="text-sm font-medium">Copyright 2026 CMCS. All Rights Reserved</p>
        </div>
    </footer>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
        import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        // CONFIGURATION
        const firebaseConfig = { 
            apiKey: "AIzaSyDaeNQF4qmW0vvwxUPp_NztnT0hoLzm1BQ",
            authDomain: "svls-289ee.firebaseapp.com",
            projectId: "svls-289ee",
            storageBucket: "svls-289ee.firebasestorage.app",
            messagingSenderId: "500705386198",
            appId: "1:500705386198:web:96f189662bc2aa99cf7377"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);

        // UI SYNC
        onAuthStateChanged(auth, async (user) => {
            if (user) {
                const snap = await getDoc(doc(db, "users", user.uid));
                if (snap.exists() && snap.data().role === 'admin') {
                    const data = snap.data();
                    document.getElementById('adminName').innerText = `${data.lastname}, ${data.firstname}`;
                    document.getElementById('adminEmail').innerText = user.email;
                } else {
                    window.location.href = "login.html";
                }
            } else {
                window.location.href = "login.html";
            }
        });

        window.logout = () => {
            signOut(auth).then(() => {
                window.location.href = "login.html";
            });
        };
    </script>
</body>
</html>
